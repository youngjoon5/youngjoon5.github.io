<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Young Joon Oh</title>

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Theme CSS -->
    <link href="css/clean-blog.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    Menu <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand" href="index.html">Home</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="about.html">About</a>
                    </li>
                    <li>
                        <a href="research.html">My Research</a>
                    </li>
                    <li>
                        <a href="post.html">Computational Social Science Post</a>
                    </li>
                    <li>
                        <a href="teaching.html">Teaching</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>





    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('img/fall1.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>Computational Social Science Post</h1>
                        <h2 class="subheading">Tips on R, Netlogo, and Python</h2>
                       <!--  <span class="meta"><i>&emsp;Posted on Dec.1, 2020</i></span>   -->
                    </div>
                </div>
            </div>
        </div>
    </header>


 

  <!--For making Rmarkdown style <code>  
        <style type="text/css">
            code {
             color: inherit;
             background-color: rgba(0, 0, 0, 0.04);
                  }
        </style>

   --> 



     <!--                      Post Content                   -->
    <!--                      Post Content                   -->
   <!--                      Post Content                   -->







   <article>
    <div class="container">
        <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            
              <h1> RStudio Server, Linux(Ubuntu), WSL(Windows Subsystem for Linux), and Docker </h1>
                 <span class="meta"><i>&emsp;Posted on Aug.15, 2021</i></span> 
              <p> If I want to use <strong>RStudio Server</strong>, I need Linux as OS.
                  Windows users like me need to set up <strong>WSL</strong>(Windows Subsystem for Linux) for RStudio Server. 
              First of all, make sure if your Windows is the latest version. </p>
              


               <ol start="1" style="list-style-type: decimal">
                            <li> Setup <strong>WSL</strong> </li> </ol>  

            Find <Strong>Turn Windows features on or off</strong> in the Search of Windows.
                <br {line-height: -10%;}></br>
                Check <code>Virtual Machine Platform</code> and <code>Windows Subsystem for Linux</code>. Then Restart your device.

             <br {line-height: 150%;}></br>



            <ol start="2" style="list-style-type: decimal">
                            <li> Change the WSL version to <strong>2</strong></li> </ol>  

<pre><code> # In the Windows PowerShell as Administrator

wsl --set-default-version 2 

# See https://aka.ms/wsl2kernel if you have an issue </code></pre>

    
          
            <ol start="3" style="list-style-type: decimal">
                            <li> Install <strong>Ubuntu</strong></li> </ol>  


        Find <strong>Run Linux on Windows</strong> in the Microsoft Store.
        Click and download <strong>Ubuntu</strong> 
        <br {line-height: 150%;}></br>
 



        <ol start="4" style="list-style-type: decimal">
                            <li> Setup <strong>Ubuntu account</strong></li> </ol>  


        Run Ubuntu you already installed, and type username and password which you desire. 
        These username and password will be used in the RStudio Server. 
         <br {line-height: 150%;}></br>



         <ol start="5" style="list-style-type: decimal">
                            <li> Update Ubuntu</li> </ol>  

<pre><code> # In the Ubuntu

sudo apt update
sudo apt upgrade -y

# You cannot use ctrl+V in the Ubuntu. Instead Use the right click </code></pre>



<ol start="6" style="list-style-type: decimal">
                            <li> Install the latest R and RStudio Server</li> </ol>  

<pre><code> # See https://cran.r-project.org/bin/linux/ubuntu/   
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E298A3A825C0D65DFD57CBB651716619E084DAB9

sudo add-apt-repository 'deb https://cloud.r-project.org/bin/linux/ubuntu focal-cran40/' 

sudo apt update

sudo apt install -y r-base r-base-core r-recommended r-base-dev gdebi-core build-essential libcurl4-gnutls-dev libxml2-dev libssl-dev 


## Install RStudio Server ##

wget https://rstudio.org/download/latest/stable/server/bionic/rstudio-server-latest-amd64.deb

sudo gdebi rstudio-server-latest-amd64.deb</code></pre>


<ol start="7" style="list-style-type: decimal">
                            <li> Run RStudio Server</li> </ol>  

<pre><code> sudo rstudio-server start </code></pre>
                    In the Web browser,  <code>http://localhost:8787</code>, and type username and password you already created for the Ubuntu account.
                    <br {line-height: 150%;}></br>

<ol start="8" style="list-style-type: decimal">
                            <li> Tip and Close RStudio Server</li> </ol>  

<pre><code> # Some packages may cause an install issue. You may need an dependency. 
# https://jeroen.cran.dev/V8/
sudo apt-get install -y libv8-dev
# Then install R package V8

## To Close RStudio Server ##

sudo rstudio-server stop </code></pre>

<br {line-height: 150%;}></br>


<ol start="9" style="list-style-type: decimal">
                            <li> Docker</li> </ol>  
Now you can use RStudio Server. But every time you need to open Ubuntu and type the code. When you close it, you also need to type the code in Ubuntu. Furthermore, when you need to run multiple machines using R, you may want something efficient. <strong>Docker</strong> can be an answer. Download<a href="https://www.docker.com"><font color=blue> Docker </font> </a>. <br {line-height: 80%;}></br>
Run Docker. you can find <strong>Images</strong> tab in the left panel. Docker needs an image to run instead of files. We need Rstudio image. <br {line-height: 80%;}></br>
Go to <a href="https://hub.docker.com"> <font color=blue>DockerHub</font></a>. Then type <code>rocker</code> in the Search. You can find <code>rocker/rstudio</code>. Copy <code>docker pull rocker/rstudio</code>, then paste it in the Powershell.
<br {line-height: 80%;}></br>
You can find <code>rocker/rstudio</code> in the <strong>image</strong> tab of docker.
<br {line-height: 80%;}></br>
Click <strong>Run</strong> for it. In the option, choose <strong>Container names</strong>. For example, "rstudio-1". Then configure 4-digit <strong> Local Host</strong> like 1001.
<br {line-height: 80%;}></br>
Now you can see <code>rstudio-1</code> in the <strong>Containers/Apps</strong> tab. In the web browser, type <code>http://localhost:1001/</code>. Both ID and Password are rstudio which was created by image creators.

<br {line-height: 150%;}></br>

<ol start="10" style="list-style-type: decimal">
                            <li> Update image for your project</li> </ol> 

        After creating your R environment using the rocker's image, you need to make your own image.

<pre><code> # In the Powershell, check docker containers 
docker ps -a

docker commit {Container ID} {New image name}
#ex# docker commit 40b8d16b7dba rstudio-2</code></pre>

Now you can find <code>rstudio-2</code> in the <strong>image</strong> tab. This <code>rstudio-2</code> has the same environment you already created. Just run this without typing the code in Ubuntu. If you make multiple containers, you can run multiple <strong>R</strong>s at the same time.

<br {line-height: 150%;}></br>



<ol start="11" style="list-style-type: decimal">
                            <li> To Stop Vmmem</li> </ol> 

<pre><code> # In the Powershell
wsl --shutdown </code></pre>




<br {line-height: 150%;}></br>



<ol start="12" style="list-style-type: decimal">
                            <li> To setup xfce4</li> </ol> 

<pre><code> # In the Ubuntu
cat /etc/resolv.conf
# It will show nameserver. 

nano ~/.bashrc
# It will open nano editor. In the nano, scroll down the bottom. Then,
export DISPLAY={the nameserver above}:0
#ex# export DISPLAY=100.00.000.1:0

# Save it with Ctrl+X. In Ubuntu
source ~/.bashrc

echo $DISPLAY

# If it show the nameserver, then type
startxfce4 </code></pre>

However, the namesever can change. It is tiresome to change it everytime.
<pre><code>#  In Nano, delete "export DISPLAY={the nameserver above}:0". 
export DISPLAY=$(cat /etc/resolv.conf | grep nameserver | awk '{print $2}'):0
GDK_SCALE=1
# Then Save it.
</code></pre>

<p></p>





<!-- Begin : pager back to Computational social science post -->

<ul class="pager">
    <li class="next">
        <a href="post.html">Return to Post List &rarr;</a>
    </li>
</ul>

<!-- End : pager back to Computational social science post -->


<br></br>

</div>
</div>
</div>
</div>






        </div>
       </div>
    </div>
</article>

    <hr>




   






    <!--            Footer            -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                                                <li>
                            <a href="https://www.youtube.com/user/yjoon5">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-youtube fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/youngjoon5">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>
                    <p class="copyright text-muted">Copyright &copy; Start Bootstrap 2016</p>
                </div>
            </div>
        </div>
    </footer>







    <!-- jQuery -->
    <script src="vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Theme JavaScript -->
    <script src="js/clean-blog.min.js"></script>

</body>

</html>
